{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\tanka\\\\Desktop\\\\ESC\\\\Project\\\\SingHealthApp\\\\singhealth2.0\\\\client\\\\src\\\\components\\\\ViewAudit.js\";\nimport React, { Component } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { Typography, Progress, Image, Input, Comment, Form, Button, Row, Col, Card, Modal, Divider, Layout } from \"antd\";\nimport dateformat from \"dateformat\";\nimport PropTypes from \"prop-types\";\nimport { connect } from \"react-redux\";\nimport moment from \"moment\";\nimport { updateAudit, updateAuditImage } from \"../actions/auditActions.js\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst fileUpload = require(\"fuctbase64\");\n\nconst {\n  Text\n} = Typography;\nconst {\n  TextArea\n} = Input;\n\nclass ViewAudit extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      _id: \"\",\n      audit: \"\",\n      total_score: \"\",\n      tenantID: \"\",\n      auditor: \"\",\n      // auditorComments: [\"Bla\", \"blabla\"],\n      // tenantComments: [\"Response\", \"response\"],\n      comment: \"\",\n      image: \"\",\n      date: \"\",\n      rectifyDate: \"\",\n      catCounts: \"\",\n      type: \"\",\n      decodedImage: \"\",\n      newComment: \"\",\n      tempImageBase64: [],\n      tempImageCaption: null,\n      imageUpload: [],\n      visibleConfirm: false,\n      testState: \"\"\n    };\n\n    this.fileSelectedHandler = event => {\n      console.log(event.target.files[0]);\n      fileUpload(event).then(data => {\n        console.log(\"base64: \", data.base64);\n        this.setState({\n          // image: [{ \"base64\": data.base64, \"date\": dateformat(Date().toString(), \"yyyy-mm-dd'T'HH:MM:ss.sssZ\"), \"caption\": \"\" }]\n          tempImageBase64: [{\n            base64: data.base64,\n            date: dateformat(Date().toString(), \"yyyy-mm-dd'T'HH:MM:ss.sssZ\")\n          }]\n        });\n      });\n    };\n\n    this.onChangeCaption = caption => {\n      console.log(this.state);\n      this.setState({\n        tempImageCaption: caption.nativeEvent.explicitOriginalTarget.value\n      });\n    };\n\n    this.handleUploadOk = e => {\n      console.log(e);\n      console.log(this.state);\n      var tempArray = this.state.image;\n      console.log(tempArray);\n      tempArray.push([{\n        base64: this.state.tempImageBase64[0].base64,\n        date: this.state.tempImageBase64[0].date,\n        caption: this.state.tempImageCaption\n      }]);\n      console.log(tempArray);\n      this.setState({\n        image: tempArray,\n        visibleConfirm: false\n      });\n      this.updateImage();\n    };\n\n    this.onChange = value => {\n      console.log(value.Text);\n      console.log(this.state.newComment);\n    };\n\n    this.handleFormOk = e => {\n      console.log(e);\n      this.setState({\n        imageUpload: [{\n          base64: this.state.tempImageBase64[0].base64,\n          date: this.state.tempImageBase64[0].date,\n          caption: this.state.tempImageCaption,\n          uploader: \"auditor\"\n        }],\n        // image: tempArray,\n        // visibleConfirm: false,\n        testState: \"Test Passed\"\n      });\n      this.showConfirmModal();\n    };\n\n    this.showConfirmModal = () => {\n      this.setState({\n        visibleConfirm: true\n      });\n    };\n\n    this.newComment = values => {\n      // console.log(values.nativeEvent.explicitOriginalTarget.value);\n      this.setState({\n        newComment: [{\n          content: values.nativeEvent.explicitOriginalTarget.value,\n          date: dateformat(Date().toString(), \"yyyy-mm-dd'T'HH:MM:ss.sssZ\"),\n          author: this.state.auditor\n        }]\n      }); // console.log(this.state.newComment)\n    };\n\n    this.submitComment = () => {\n      var tempArray = this.state.comment;\n      console.log(tempArray);\n      tempArray.push(this.state.newComment[0]);\n      console.log(tempArray);\n      this.setState({\n        comment: tempArray\n      });\n      console.log(this.state.comment);\n      this.updateComment();\n    };\n\n    this.updateComment = () => {\n      console.log(this.state);\n      updateAudit({\n        _id: this.props.tenantInfo.record._id,\n        type: this.props.tenantInfo.record.type,\n        catCounts: this.props.tenantInfo.record.catCounts,\n        total_score: this.props.tenantInfo.record.total_score,\n        image: this.props.tenantInfo.record.image,\n        date: this.props.tenantInfo.record.date,\n        comment: this.state.newComment,\n        location: this.props.tenantInfo.record.location,\n        tenantID: this.props.tenantInfo.record.tenantID\n      });\n    };\n\n    this.updateImage = () => {\n      console.log(this.state);\n      updateAuditImage({\n        _id: this.props.tenantInfo.record._id,\n        type: this.props.tenantInfo.record.type,\n        catCounts: this.props.tenantInfo.record.catCounts,\n        total_score: this.props.tenantInfo.record.total_score,\n        image: this.state.imageUpload,\n        date: this.props.tenantInfo.record.date,\n        comment: this.props.tenantInfo.record.comment,\n        location: this.props.tenantInfo.record.location,\n        tenantID: this.props.tenantInfo.record.tenantID\n      });\n    };\n  }\n\n  componentDidMount() {\n    this.setState({\n      _id: this.props.tenantInfo.record._id,\n      total_score: this.props.tenantInfo.record.total_score,\n      tenantID: this.props.tenantInfo.record.tenantID,\n      comment: this.props.tenantInfo.record.comment,\n      image: this.props.tenantInfo.record.image,\n      date: this.props.tenantInfo.record.date,\n      rectifyDate: this.props.tenantInfo.record.rectifyDate,\n      auditor: this.props.tenantInfo.record.auditor,\n      catCounts: this.props.tenantInfo.record.catCounts,\n      type: this.props.tenantInfo.record.type\n    });\n    console.log(this.state);\n  }\n\n  displayComments() {\n    var output = [];\n    var Comm = [];\n\n    for (var i = 0; i < Math.max(this.state.comment.length, this.state.image === null ? 0 : this.state.image.length); i++) {\n      if (this.state.comment[i] != null) {\n        Comm.push(this.state.comment[i]);\n      }\n\n      if (this.state.image !== null && this.state.image[i] !== null) {\n        Comm.push(this.state.image[i]);\n      }\n    }\n\n    Comm = Comm.sort((a, b) => a.date > b.date);\n    console.log(Comm);\n    let cardAlign = \"cardLeft\";\n\n    for (var j = 0; j < Comm.length; j++) {\n      if (Comm[j].content) {\n        cardAlign = Comm[j].author === \"Tenant(You)\" ? \"cardRight\" : \"cardLeft\";\n        output.push( /*#__PURE__*/_jsxDEV(Card, {\n          size: \"small\",\n          className: cardAlign,\n          children: /*#__PURE__*/_jsxDEV(Comment, {\n            author: /*#__PURE__*/_jsxDEV(\"a\", {\n              children: Comm[j].author\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 141,\n              columnNumber: 23\n            }, this),\n            content: /*#__PURE__*/_jsxDEV(\"p\", {\n              children: Comm[j].content\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 142,\n              columnNumber: 24\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 140,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 139,\n          columnNumber: 11\n        }, this));\n      } else {\n        cardAlign = Comm[j].author === \"Tenant(You)\" ? \"cardRight\" : \"cardLeft\";\n        output.push( /*#__PURE__*/_jsxDEV(Card, {\n          className: cardAlign,\n          size: \"small\",\n          children: [/*#__PURE__*/_jsxDEV(Comment, {\n            author: /*#__PURE__*/_jsxDEV(\"a\", {\n              children: Comm[j].uploader\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 151,\n              columnNumber: 23\n            }, this),\n            className: \"caption\",\n            content: /*#__PURE__*/_jsxDEV(\"p\", {\n              children: Comm[j].caption\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 153,\n              columnNumber: 24\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 150,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Image, {\n            width: 100,\n            src: `data:image/jpeg;base64,${Comm[j].base64}`\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 155,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 149,\n          columnNumber: 11\n        }, this));\n      }\n    }\n\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: output\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 12\n    }, this);\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(Layout, {\n      children: [/*#__PURE__*/_jsxDEV(Card, {\n        children: /*#__PURE__*/_jsxDEV(Row, {\n          children: [/*#__PURE__*/_jsxDEV(Col, {\n            span: 15,\n            style: {\n              display: \"block\"\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                \"text-align\": \"left\",\n                clear: \"both\",\n                width: \"100%\"\n              },\n              children: [\"Tenant ID:\", \" \"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 257,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"name\",\n              children: /*#__PURE__*/_jsxDEV(\"b\", {\n                children: this.state.tenantID\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 263,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 262,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                \"text-align\": \"left\",\n                clear: \"both\",\n                width: \"100%\"\n              },\n              children: \"Auditor:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 265,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"name\",\n              children: /*#__PURE__*/_jsxDEV(\"b\", {\n                children: this.state.auditor\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 271,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 270,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                \"text-align\": \"left\",\n                clear: \"both\",\n                width: \"100%\"\n              },\n              children: \"Rectification Deadline:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 273,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"name\",\n              children: /*#__PURE__*/_jsxDEV(\"b\", {\n                children: moment(this.state.rectifyDate, \"YYYY-MM-DDTHH:mm:ss.SSS\").format(\"Do MMMM, YYYY\")\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 279,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 278,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 256,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Col, {\n            span: 9,\n            children: /*#__PURE__*/_jsxDEV(Progress, {\n              className: \"score\",\n              type: \"circle\",\n              percent: this.state.total_score,\n              width: \"18vh\",\n              strokeWidth: \"10\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 288,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 287,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 255,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 254,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: this.displayComments()\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 299,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Card, {\n          size: \"small\",\n          children: /*#__PURE__*/_jsxDEV(Form, {\n            className: \"addComment\",\n            onChange: this.newComment,\n            layout: \"vertical\",\n            size: \"small\",\n            initialValues: {\n              remember: false\n            },\n            children: [/*#__PURE__*/_jsxDEV(Form.Item, {\n              name: \"addComment\",\n              label: /*#__PURE__*/_jsxDEV(\"b\", {\n                children: \"Add Comment\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 310,\n                columnNumber: 51\n              }, this),\n              children: /*#__PURE__*/_jsxDEV(TextArea, {\n                className: \"addCommentText\",\n                placeholder: \"Add Comment\",\n                rows: 4,\n                allowClear: true\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 311,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 310,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Form.Item, {\n              children: /*#__PURE__*/_jsxDEV(Button, {\n                className: \"view-audit-buttons\",\n                onClick: this.submitComment,\n                children: \"Submit Comment\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 319,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 318,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Divider, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 327,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Form.Item, {\n              label: /*#__PURE__*/_jsxDEV(\"b\", {\n                children: \"Add Photo\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 329,\n                columnNumber: 33\n              }, this),\n              children: /*#__PURE__*/_jsxDEV(Input, {\n                type: \"file\",\n                onChange: this.fileSelectedHandler\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 330,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 329,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Form.Item, {\n              name: \"caption\",\n              rules: [{\n                required: true,\n                message: \"Description\"\n              }],\n              children: /*#__PURE__*/_jsxDEV(Input, {\n                placeholder: \"Caption\",\n                onChange: this.onChangeCaption,\n                value: this.state.caption,\n                id: \"caption\",\n                type: \"caption\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 342,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 333,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Button, {\n              className: \"view-audit-buttons\",\n              onClick: this.handleFormOk,\n              children: \"Submit Photo\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 350,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 301,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 300,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Modal, {\n          title: \"Upload Confirm\",\n          destroyOnClose: true,\n          visible: this.state.visibleConfirm,\n          onOk: this.handleUploadOk,\n          okButtonProps: {\n            disabled: false\n          },\n          cancelButtonProps: {\n            disabled: true,\n            visible: false\n          },\n          children: /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Photo Added!\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 366,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 358,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 298,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 253,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nViewAudit.propTypes = {\n  tenantInfo: PropTypes.object.isRequired\n};\n\nconst mapStateToProps = state => ({\n  tenantInfo: state.tenantInfo\n});\n\nexport default connect(mapStateToProps)(ViewAudit);","map":{"version":3,"sources":["C:/Users/tanka/Desktop/ESC/Project/SingHealthApp/singhealth2.0/client/src/components/ViewAudit.js"],"names":["React","Component","Link","Typography","Progress","Image","Input","Comment","Form","Button","Row","Col","Card","Modal","Divider","Layout","dateformat","PropTypes","connect","moment","updateAudit","updateAuditImage","fileUpload","require","Text","TextArea","ViewAudit","state","_id","audit","total_score","tenantID","auditor","comment","image","date","rectifyDate","catCounts","type","decodedImage","newComment","tempImageBase64","tempImageCaption","imageUpload","visibleConfirm","testState","fileSelectedHandler","event","console","log","target","files","then","data","base64","setState","Date","toString","onChangeCaption","caption","nativeEvent","explicitOriginalTarget","value","handleUploadOk","e","tempArray","push","updateImage","onChange","handleFormOk","uploader","showConfirmModal","values","content","author","submitComment","updateComment","props","tenantInfo","record","location","componentDidMount","displayComments","output","Comm","i","Math","max","length","sort","a","b","cardAlign","j","render","display","clear","width","format","remember","required","message","disabled","visible","propTypes","object","isRequired","mapStateToProps"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport {\r\n  Typography,\r\n  Progress,\r\n  Image,\r\n  Input,\r\n  Comment,\r\n  Form,\r\n  Button,\r\n  Row,\r\n  Col,\r\n  Card,\r\n  Modal,\r\n  Divider,\r\n  Layout,\r\n} from \"antd\";\r\nimport dateformat from \"dateformat\";\r\nimport PropTypes from \"prop-types\";\r\nimport { connect } from \"react-redux\";\r\nimport moment from \"moment\";\r\nimport { updateAudit, updateAuditImage } from \"../actions/auditActions.js\";\r\nconst fileUpload = require(\"fuctbase64\");\r\n\r\nconst { Text } = Typography;\r\nconst { TextArea } = Input;\r\n\r\nclass ViewAudit extends Component {\r\n  state = {\r\n    _id: \"\",\r\n    audit: \"\",\r\n    total_score: \"\",\r\n    tenantID: \"\",\r\n    auditor: \"\",\r\n    // auditorComments: [\"Bla\", \"blabla\"],\r\n    // tenantComments: [\"Response\", \"response\"],\r\n    comment: \"\",\r\n    image: \"\",\r\n    date: \"\",\r\n    rectifyDate: \"\",\r\n    catCounts: \"\",\r\n    type: \"\",\r\n    decodedImage: \"\",\r\n    newComment: \"\",\r\n    tempImageBase64: [],\r\n    tempImageCaption: null,\r\n    imageUpload: [],\r\n    visibleConfirm: false,\r\n    testState: \"\",\r\n  };\r\n\r\n  componentDidMount() {\r\n    this.setState({\r\n      _id: this.props.tenantInfo.record._id,\r\n      total_score: this.props.tenantInfo.record.total_score,\r\n      tenantID: this.props.tenantInfo.record.tenantID,\r\n      comment: this.props.tenantInfo.record.comment,\r\n      image: this.props.tenantInfo.record.image,\r\n      date: this.props.tenantInfo.record.date,\r\n      rectifyDate: this.props.tenantInfo.record.rectifyDate,\r\n      auditor: this.props.tenantInfo.record.auditor,\r\n      catCounts: this.props.tenantInfo.record.catCounts,\r\n      type: this.props.tenantInfo.record.type,\r\n    });\r\n    console.log(this.state);\r\n  }\r\n\r\n  fileSelectedHandler = (event) => {\r\n    console.log(event.target.files[0]);\r\n    fileUpload(event).then((data) => {\r\n      console.log(\"base64: \", data.base64);\r\n      this.setState({\r\n        // image: [{ \"base64\": data.base64, \"date\": dateformat(Date().toString(), \"yyyy-mm-dd'T'HH:MM:ss.sssZ\"), \"caption\": \"\" }]\r\n        tempImageBase64: [\r\n          {\r\n            base64: data.base64,\r\n            date: dateformat(Date().toString(), \"yyyy-mm-dd'T'HH:MM:ss.sssZ\"),\r\n          },\r\n        ],\r\n      });\r\n    });\r\n  };\r\n\r\n  onChangeCaption = (caption) => {\r\n    console.log(this.state);\r\n    this.setState({\r\n      tempImageCaption: caption.nativeEvent.explicitOriginalTarget.value,\r\n    });\r\n  };\r\n\r\n  handleUploadOk = (e) => {\r\n    console.log(e);\r\n    console.log(this.state);\r\n    var tempArray = this.state.image;\r\n    console.log(tempArray);\r\n    tempArray.push([\r\n      {\r\n        base64: this.state.tempImageBase64[0].base64,\r\n        date: this.state.tempImageBase64[0].date,\r\n        caption: this.state.tempImageCaption,\r\n      },\r\n    ]);\r\n    console.log(tempArray);\r\n    this.setState({\r\n      image: tempArray,\r\n      visibleConfirm: false,\r\n    });\r\n    this.updateImage();\r\n  };\r\n\r\n  displayComments() {\r\n    var output = [];\r\n    var Comm = [];\r\n    for (\r\n      var i = 0;\r\n      i <\r\n      Math.max(\r\n        this.state.comment.length,\r\n        this.state.image === null ? 0 : this.state.image.length\r\n      );\r\n      i++\r\n    ) {\r\n      if (this.state.comment[i] != null) {\r\n        Comm.push(this.state.comment[i]);\r\n      }\r\n\r\n      if (this.state.image !== null && this.state.image[i] !== null) {\r\n        Comm.push(this.state.image[i]);\r\n      }\r\n    }\r\n    Comm = Comm.sort((a, b) => a.date > b.date);\r\n    console.log(Comm);\r\n\r\n    let cardAlign = \"cardLeft\";\r\n    for (var j = 0; j < Comm.length; j++) {\r\n      if (Comm[j].content) {\r\n        cardAlign = Comm[j].author === \"Tenant(You)\" ? \"cardRight\" : \"cardLeft\";\r\n        output.push(\r\n          <Card size=\"small\" className={cardAlign}>\r\n            <Comment\r\n              author={<a>{Comm[j].author}</a>}\r\n              content={<p>{Comm[j].content}</p>}\r\n            />\r\n          </Card>\r\n        );\r\n      } else {\r\n        cardAlign = Comm[j].author === \"Tenant(You)\" ? \"cardRight\" : \"cardLeft\";\r\n        output.push(\r\n          <Card className={cardAlign} size=\"small\">\r\n            <Comment\r\n              author={<a>{Comm[j].uploader}</a>}\r\n              className=\"caption\"\r\n              content={<p>{Comm[j].caption}</p>}\r\n            ></Comment>\r\n            <Image\r\n              width={100}\r\n              src={`data:image/jpeg;base64,${Comm[j].base64}`}\r\n            />\r\n          </Card>\r\n        );\r\n      }\r\n    }\r\n    return <div>{output}</div>;\r\n  }\r\n\r\n  onChange = (value) => {\r\n    console.log(value.Text);\r\n    console.log(this.state.newComment);\r\n  };\r\n\r\n  handleFormOk = (e) => {\r\n    console.log(e);\r\n    this.setState({\r\n      imageUpload: [\r\n        {\r\n          base64: this.state.tempImageBase64[0].base64,\r\n          date: this.state.tempImageBase64[0].date,\r\n          caption: this.state.tempImageCaption,\r\n          uploader: \"auditor\",\r\n        },\r\n      ],\r\n      // image: tempArray,\r\n      // visibleConfirm: false,\r\n      testState: \"Test Passed\",\r\n    });\r\n    this.showConfirmModal();\r\n  };\r\n\r\n  showConfirmModal = () => {\r\n    this.setState({\r\n      visibleConfirm: true,\r\n    });\r\n  };\r\n\r\n  newComment = (values) => {\r\n    // console.log(values.nativeEvent.explicitOriginalTarget.value);\r\n    this.setState({\r\n      newComment: [\r\n        {\r\n          content: values.nativeEvent.explicitOriginalTarget.value,\r\n          date: dateformat(Date().toString(), \"yyyy-mm-dd'T'HH:MM:ss.sssZ\"),\r\n          author: this.state.auditor,\r\n        },\r\n      ],\r\n    });\r\n    // console.log(this.state.newComment)\r\n  };\r\n\r\n  submitComment = () => {\r\n    var tempArray = this.state.comment;\r\n    console.log(tempArray);\r\n    tempArray.push(this.state.newComment[0]);\r\n    console.log(tempArray);\r\n    this.setState({\r\n      comment: tempArray,\r\n    });\r\n    console.log(this.state.comment);\r\n    this.updateComment();\r\n  };\r\n\r\n  updateComment = () => {\r\n    console.log(this.state);\r\n    updateAudit({\r\n      _id: this.props.tenantInfo.record._id,\r\n      type: this.props.tenantInfo.record.type,\r\n      catCounts: this.props.tenantInfo.record.catCounts,\r\n      total_score: this.props.tenantInfo.record.total_score,\r\n      image: this.props.tenantInfo.record.image,\r\n      date: this.props.tenantInfo.record.date,\r\n      comment: this.state.newComment,\r\n      location: this.props.tenantInfo.record.location,\r\n      tenantID: this.props.tenantInfo.record.tenantID,\r\n    });\r\n  };\r\n\r\n  updateImage = () => {\r\n    console.log(this.state);\r\n    updateAuditImage({\r\n      _id: this.props.tenantInfo.record._id,\r\n      type: this.props.tenantInfo.record.type,\r\n      catCounts: this.props.tenantInfo.record.catCounts,\r\n      total_score: this.props.tenantInfo.record.total_score,\r\n      image: this.state.imageUpload,\r\n      date: this.props.tenantInfo.record.date,\r\n      comment: this.props.tenantInfo.record.comment,\r\n      location: this.props.tenantInfo.record.location,\r\n      tenantID: this.props.tenantInfo.record.tenantID,\r\n    });\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <Layout>\r\n        <Card>\r\n          <Row>\r\n            <Col span={15} style={{ display: \"block\" }}>\r\n              <div\r\n                style={{ \"text-align\": \"left\", clear: \"both\", width: \"100%\" }}\r\n              >\r\n                Tenant ID:{\" \"}\r\n              </div>\r\n              <div className=\"name\">\r\n                <b>{this.state.tenantID}</b>\r\n              </div>\r\n              <div\r\n                style={{ \"text-align\": \"left\", clear: \"both\", width: \"100%\" }}\r\n              >\r\n                Auditor:\r\n              </div>\r\n              <div className=\"name\">\r\n                <b>{this.state.auditor}</b>\r\n              </div>\r\n              <div\r\n                style={{ \"text-align\": \"left\", clear: \"both\", width: \"100%\" }}\r\n              >\r\n                Rectification Deadline:\r\n              </div>\r\n              <div className=\"name\">\r\n                <b>\r\n                  {moment(\r\n                    this.state.rectifyDate,\r\n                    \"YYYY-MM-DDTHH:mm:ss.SSS\"\r\n                  ).format(\"Do MMMM, YYYY\")}\r\n                </b>\r\n              </div>\r\n            </Col>\r\n            <Col span={9}>\r\n              <Progress\r\n                className=\"score\"\r\n                type=\"circle\"\r\n                percent={this.state.total_score}\r\n                width={\"18vh\"}\r\n                strokeWidth={\"10\"}\r\n              />\r\n            </Col>\r\n          </Row>\r\n        </Card>\r\n        <div>\r\n          <div>{this.displayComments()}</div>\r\n          <Card size=\"small\">\r\n            <Form\r\n              className=\"addComment\"\r\n              onChange={this.newComment}\r\n              layout=\"vertical\"\r\n              size=\"small\"\r\n              initialValues={{\r\n                remember: false,\r\n              }}\r\n            >\r\n              <Form.Item name=\"addComment\" label={<b>Add Comment</b>}>\r\n                <TextArea\r\n                  className=\"addCommentText\"\r\n                  placeholder=\"Add Comment\"\r\n                  rows={4}\r\n                  allowClear={true}\r\n                />\r\n              </Form.Item>\r\n              <Form.Item>\r\n                <Button\r\n                  className=\"view-audit-buttons\"\r\n                  onClick={this.submitComment}\r\n                >\r\n                  Submit Comment\r\n                </Button>\r\n              </Form.Item>\r\n\r\n              <Divider />\r\n\r\n              <Form.Item label={<b>Add Photo</b>}>\r\n                <Input type=\"file\" onChange={this.fileSelectedHandler} />\r\n              </Form.Item>\r\n\r\n              <Form.Item\r\n                name=\"caption\"\r\n                rules={[\r\n                  {\r\n                    required: true,\r\n                    message: \"Description\",\r\n                  },\r\n                ]}\r\n              >\r\n                <Input\r\n                  placeholder=\"Caption\"\r\n                  onChange={this.onChangeCaption}\r\n                  value={this.state.caption}\r\n                  id=\"caption\"\r\n                  type=\"caption\"\r\n                />\r\n              </Form.Item>\r\n              <Button\r\n                className=\"view-audit-buttons\"\r\n                onClick={this.handleFormOk}\r\n              >\r\n                Submit Photo\r\n              </Button>\r\n            </Form>\r\n          </Card>\r\n          <Modal\r\n            title=\"Upload Confirm\"\r\n            destroyOnClose={true}\r\n            visible={this.state.visibleConfirm}\r\n            onOk={this.handleUploadOk}\r\n            okButtonProps={{ disabled: false }}\r\n            cancelButtonProps={{ disabled: true, visible: false }}\r\n          >\r\n            <p>Photo Added!</p>\r\n          </Modal>\r\n        </div>\r\n      </Layout>\r\n    );\r\n  }\r\n}\r\n\r\nViewAudit.propTypes = {\r\n  tenantInfo: PropTypes.object.isRequired,\r\n};\r\nconst mapStateToProps = (state) => ({\r\n  tenantInfo: state.tenantInfo,\r\n});\r\nexport default connect(mapStateToProps)(ViewAudit);\r\n"]},"metadata":{},"sourceType":"module"}